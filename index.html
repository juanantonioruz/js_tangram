<!doctype html>
<html lang="en">
  <head>
	  <meta charset="utf-8">
	  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title> DEF PROPOSAL: exercise async</title>
    <!--link rel="stylesheet"
    href="css/no-theme/jquery-ui-1.10.3.custom.min.css" / -->
    <link rel="stylesheet" href="styles/default.css">

    <script  src="js/d3.js" ></script>
    <script  src="js/highlight.pack.js" ></script>
    <script  src="js/jquery-1.9.1.min.js" ></script>
    <script src="js/jquery-ui-1.10.3.custom.min.js"></script>
    <script  src="js/jquery.tmpl.js" ></script>
    <script src="js/jquery.color.js"></script>
    <script>

   
// d3 related functions
function create_node(the_name, _data){
    return {name:the_name,ns:the_name, children:[], data_displayed:_data};
};

function create_data(_type, _data){
    return {type:_type, data:_data};
}

function debug_pipelines(render, div_id){
return function (data_state, callback){
               var ns=this.target.ns;
               
               var event_type=this.transformation_event_type;
               if(ns.indexOf("pipeline_")>-1){
                   if(event_type=="ON_INIT"){

                       if(data_state.active_pipelines.length>0)
                           this.target.active_parent=data_state.active_pipelines[data_state.active_pipelines.length-1];
                       else
                           this.target.active_parent=data_state;
if(!this.target.parallel)
                       data_state.active_pipelines.push(this.target);


                   }else{

if(!this.target.parallel){
                       var index=data_state.active_pipelines.indexOf(this.target);

                       data_state.active_pipelines.splice(index, 1);
}
                       this.target.active_parent.children.push(this.target);

                       // display results
                       var root=create_node("root", create_data("root", {name:"root"}));
                       root.children=data_state.active_pipelines;
                       
                       render(data_state, div_id);

                   }
               }else{
                   if(event_type=="ON_INIT"){
                       this.target.pipeline.children.push(this.target);
                   }else{
                   }
               }
                callback(null, data_state);
           };
}



      function toJson(o){
      return JSON.stringify(o, null, 4);
      };
      var debug=false;
      var fine_debug=false;

    function getStart(){return (new Date).getTime();};
    function getDiff(start){return (new Date).getTime() - start;};
    function recordStart(o) {o['start']= getStart();};
    function recordDiff(o){var dif=getDiff(o['start']); o['diff']= dif; return dif;};
 function contains(context, search){
            return (context.indexOf(search) !== -1);
        }

      $.get('../js/html/my_template.html',                               function(t) { $.template('my_template', t); });

    </script>

    <script type="text/javascript" src="js/require.js" data-main="js/controller"></script>

    <style>
      #container{width:100%;}
      #left{float:left;width:20%;}
      #right{float:right;}
      #center{margin:0 0 0 100px;width:40%; float:left;}
      ul{
      margin-left:0em; 
      padding-left:0.2em; 
      margin-bottom:1em; 
      }
      li{  
      padding-left: 0.8em; 
//      list-style: none; 
      }

//D3JS
.node circle {
  fill: #fff;
  stroke: steelblue;
  stroke-width: 1.5px;
}

.node {
  font: 10px sans-serif;
}

.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 1.5px;
}
    </style>
  </head>

  <body >
<div class='pipelines' id='pipelines'>
</div>

<div class='chart' id='chart'>
</div>
You can select one: <a href='?dev=true'>dev examples</a> or <a href='?proposal=true'>proposal</a>
    <div id="input_user" >
    </div>
    <div id="status" style=""></div>
    <div id="container">
      <div id="left" style="font-size:11px;word-wrap: break-word;">
        <h1 id='loading'>openstack testing</h1>
        <div id="loading_results" style="padding:4px;margin-bottom:5px;"></div>
        <div id="event_history"></div></div>
      <div id="right">
        <div class='chart_history' id='chart_history'>
        </div>

        <div id="logging" style="font-size:12px;">
          <ul id="history_status"></ul>
</div></div>
      <div id="center">
        <div id="content" style="background-color:pink;word-wrap: break-word;"></div>
      </div>
      <div style="clear:both;">
      </div>
<div id="footer"><!--I am the static footer--></div>

      <script>

      </script>
  </body>
</html>
