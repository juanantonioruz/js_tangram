<div class="row-fluid">
    <div class="span3 facets_container">
        <div class="select_facet_fields">
            {{if select_facet_fields.length > 0}}
                <h4>Selected Filters</h4>
                {{each select_facet_fields}}
                    <div class="selected_facet_field">
                        <span class="facet_name">${$value.display_name}:</span>
                        <span class="facet_value">${$value.value_display_name}</span>
                        <i class="icon-minus-sign remove" data-facet_name="${$value.name}" data-facet_value="${$value.value}"></i>
                    </div>
                {{/each}}
            {{/if}}
        </div>
        <h4>
            {{if facet_fields.length > 0 || range_facets.length >0 }}
                Filters
            {{/if}}
        </h4>
        <div class="facet_fields">
            {{each range_facets}}
                <div class="range_facet" data-range_facet="${JSON.stringify($value)}">
                    <span class="facet_name">${$value.display_name}</span>
                    <div class="range_labels clearfix">
                        <span class="min"></span>
                        <span class="max pull-right"></span>
                    </div>
                    <div class="slider"></div>
                </div>
            {{/each}}
            {{each facet_fields}}
                <div class="facet_field">
                    <span class="facet_name">${$value.display_name}</span>
                    <div class="facets" data-facet_name="${$value.name}">
                        {{each $value.facets}}
                            <div class="facet">
                                <span class="facet_value" data-facet_value="${$value.name}">${$value.display_name} (${$value.count})</span>
                            </div>
                        {{/each}}
                    </div>
                </div>
            {{/each}}
        </div>
    </div>
    <div class="span9 results">
        {{if view_type == "cards"}}
            <ul class="clearfix search_results inline">
                {{each results}}
                    <li class="result ui-corner-all ui-state-default ${$value.type}" data-uri="${$value.uri}" id="${guid()}" data-object="${JSON.stringify($value)}">
                        <h5 class="ui-corner-top">${$value.display_name}</h5>
                        <div class="header_table_container">
                            <table>
                                {{each $value.header}}
                                    <tr>
                                        <th>${$value.display_name}</th>
                                        <td>${$value.value}</td>
                                    </tr>
                                {{/each}}
                            </table>
                        </div>
                        <div class="children_table_container">
                            <table>
                                {{each $value.children}}
                                <tr>
                                    <th>${$value.display_name}</th>
                                    <td>${$value.value}</td>
                                </tr>
                                {{/each}}
                            </table>
                        </div>
                    </li>
                {{/each}}
            </ul>
        {{/if}}
        {{if view_type == "table"}}
            {{if type_selected}}
                <table class="search_results_table table table-hover">
                    <thead>
                        <tr>
                            <th></th>
                            {{each results[0].children}}
                                <th data-facet_value="${$value.value}">${$value.display_name}<i class="icon-caret-up"></i><i class="icon-caret-down"></i></th>
                            {{/each}}
                        </tr>
                    </thead>
                    <tbody>
                        {{each results}}
                            <tr class="result_row ${$value.type}"  data-uri="${$value.uri}" id="${guid()}" data-object="${JSON.stringify($value)}">
                                <td class="icon_container">&nbsp;</td>
                                {{each $value.children}}
                                    <td>${$value.value}</td>
                                {{/each}}
                            </tr>
                        {{/each}}
                    </tbody>
                </table>
            {{else}}
                <table class="search_results_table table table-hover">
                    <thead>
                        <tr>
                            <th></th>
                            <th data-facet_value="display_name">Name<i class="icon-caret-up"></i><i class="icon-caret-down"></i></th>
                            <th data-facet_value="ID">ID<i class="icon-caret-up"></i><i class="icon-caret-down"></i></th>
                            <th data-facet_value="type">Type<i class="icon-caret-up"></i><i class="icon-caret-down"></i></th>
                        </tr>
                    </thead>
                    <tbody>
                        {{each results}}
                            <tr class="result_row"  data-uri="${$value.uri}" id="${guid()}" data-object="${JSON.stringify($value)}">
                                <td class="icon_container">&nbsp;</td>
                                <td>${$value.display_name}</td>
                                {{each $value.header}}
                                    <td>${$value.value}</td>
                                {{/each}}
                            </tr>
                        {{/each}}
                    </tbody>
                </table>
            {{/if}}
        {{/if}}
    </div>
</div>
<div class="row-fluid">
    <div class="span12 pagination_container">
        <div class="pagination">
            <ul>
                {{if pagination.show_previous}}
                    <li><a href="#">Prev</a></li>
                {{/if}}
                {{each pagination.pages}}
                    <li class="{{if $value.disabled}}disabled {{/if}}{{if $value.active}}active {{/if}}">
                        <a href="#" data-page_start="${$value.index}">${$value.label}</a>
                    </li>
                {{/each}}
                {{if pagination.show_next}}
                    <li><a href="#">Next</a></li>
                {{/if}}
            </ul>
        </div>
        <span class="total_count">
            Viewing <strong>${pagination.viewing}</strong> of <strong>${pagination.total_count}</strong>
        </span>
    </div>
</div>
